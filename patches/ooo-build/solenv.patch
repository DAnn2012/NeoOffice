Index: inc/unxmacx.mk
===================================================================
RCS file: /cvs/tools/solenv/inc/unxmacx.mk,v
retrieving revision 1.4.2.1
diff -u -r1.4.2.1 unxmacx.mk
--- inc/unxmacx.mk	8 Nov 2006 09:43:51 -0000	1.4.2.1
+++ inc/unxmacx.mk	5 Jan 2007 07:17:18 -0000
@@ -60,12 +60,6 @@
 # STATICLIBNAME=static$(DLLPOSTFIX)
 # STATICLIB=-l$(STATICLIBNAME)
 
-# enable visibility define in "sal/types.h"
-.IF "$(HAVE_GCC_VISIBILITY_FEATURE)" == "TRUE"
-CDEFS += -DHAVE_GCC_VISIBILITY_FEATURE
-.ENDIF # "$(HAVE_GCC_VISIBILITY_FEATURE)" == "TRUE"
-
-
 # MacOS X specific Java compilation/link flags
 SOLAR_JAVA*=TRUE
 .IF "$(SOLAR_JAVA)"!=""
@@ -109,6 +103,13 @@
 CFLAGSCXX=-pipe -malign-natural -fsigned-char -Wno-long-double $(ARCH_FLAGS)
 CFLAGSCXX+= -Wno-ctor-dtor-privacy
 PICSWITCH:=-fPIC
+
+# enable visibility define in "sal/types.h"
+.IF "$(HAVE_GCC_VISIBILITY_FEATURE)" == "TRUE"
+CFLAGSCXX += -fvisibility=default
+HAVE_GCC_VISIBILITY_FEATURE:=
+.ENDIF # "$(HAVE_GCC_VISIBILITY_FEATURE)" == "TRUE"
+
 # Other flags
 CFLAGSOBJGUIST=$(PICSWITCH) -fno-common
 CFLAGSOBJCUIST=$(PICSWITCH) -fno-common
